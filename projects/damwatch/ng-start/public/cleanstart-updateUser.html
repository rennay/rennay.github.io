<!DOCTYPE html>
<html>

<head>
    <title>Sunday 5 August 2018 - Clean Start</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width = device-width, initial-scale = 1">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" href="http://demos.jquerymobile.com/1.4.2/_assets/css/jqm-demos.css">
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

    <!-- Firebase App is always required and must be first -->
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-app.js"></script>

    <!-- Add additional services that you want to use -->
    <!-- <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-auth.js"></script> -->
    <!-- <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-database.js"></script> -->
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-firestore.js"></script>
    <!-- <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-messaging.js"></script> -->
    <!-- <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-functions.js"></script> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.js"></script>
</head>

<body>
    <div data-role="header" data-position="fixed">
        <select id="_userUID">
            <option>Choose User</option>
        </select>
    </div>

    <h2 id="outputHeader">Update User...</h2>
    <!-- <select id="_userUID"/>   -->
    <table>
        <col width="100">
        <col width="100">
        <tr>
            <td>First Name:</td>
            <td>
                <input type="textfield" id="_firstname" />
            </td>
        </tr>
        <tr>
            <td>Last Name:</td>
            <td>
                <input type="textfield" id="_lastname"/>
            </td>
        </tr>
        <tr>
            <td>Criteria</td>
            <td>
                <select name="_category" id="_category" multiple="multiple" data-native-menu="false">
                    <option>Choose Category</option>
                    <option value="TV">TV</option>
                    <option value="CAR">Cars</option>
                    <option value="TYRE">Tyres</option>
                </select>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <button id="btnUpdateUser">Update User</button>
            </td>
        </tr>
    </table>
    <br/>
    <label id="_responseText"></label>
    <!-- /page -->

    <script src="cleanstart-app.js"></script>
    <script>
        // A $( document ).ready() block.
        $(document).ready(function () {
            console.log("ready!");
            populateUsers(10);
        });
        $(_userUID).change(function() {
            var userUID = document.querySelector("#_userUID").value;

            var _getUser = getUser(userUID);
            _getUser.then(_user => {
                console.log(_user);
                $("#_firstname").val(_user.firstname);
                $("#_lastname").val(_user.lastname);
            });
        });
    </script>

</body>

</html>